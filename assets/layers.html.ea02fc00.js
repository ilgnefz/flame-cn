import{_ as e,r as t,o as p,c,a as s,b as i,F as o,e as l,d as n}from"./app.0106d251.js";const u={},d=l(`<h1 id="\u56FE\u5C42" tabindex="-1"><a class="header-anchor" href="#\u56FE\u5C42" aria-hidden="true">#</a> \u56FE\u5C42</h1><p>\u56FE\u5C42\u5141\u8BB8\u4F60\u6839\u636E\u4E0A\u4E0B\u6587\u5BF9\u6E32\u67D3\u8FDB\u884C\u5206\u7EC4\uFF0C\u4E5F\u5141\u8BB8\u4F60\u9884\u6E32\u67D3\u3002\u8FD9\u53EF\u4EE5\u6E32\u67D3\u6E38\u620F\u4E2D\u5728\u5185\u5B58\u4E2D\u53D8\u5316\u4E0D\u5927\u7684\u90E8\u5206\uFF0C\u4F8B\u5982\u80CC\u666F\u3002 \u901A\u8FC7\u8FD9\u6837\u505A\uFF0C\u60A8\u5C06\u91CA\u653E\u5904\u7406\u80FD\u529B\u6765\u5904\u7406\u9700\u8981\u5728\u6BCF\u4E2A\u6E38\u620F\u65F6\u95F4\u8FDB\u884C\u6E32\u67D3\u7684\u66F4\u591A\u52A8\u6001\u5185\u5BB9\u3002</p><p>\u5728 Flame \u4E0A\u6709\u4E24\u79CD\u7C7B\u578B\u7684\u56FE\u5C42\uFF1A</p><ul><li><code>DynamicLayer</code>\uFF1A\u7528\u4E8E\u79FB\u52A8\u6216\u53D8\u5316\u7684\u4E8B\u7269</li><li><code>PreRenderedLayer</code>\uFF1A\u7528\u4E8E\u9759\u6001\u7684\u4E1C\u897F\u3002</li></ul><h2 id="dynamiclayer" tabindex="-1"><a class="header-anchor" href="#dynamiclayer" aria-hidden="true">#</a> DynamicLayer</h2><p>\u52A8\u6001\u56FE\u5C42\u662F\u6BCF\u6B21\u5728\u753B\u5E03\u4E0A\u7ED8\u5236\u65F6\u6E32\u67D3\u7684\u56FE\u5C42\u3002 \u987E\u540D\u601D\u4E49\uFF0C\u5B83\u9002\u7528\u4E8E\u52A8\u6001\u5185\u5BB9\uFF0C\u6700\u9002\u7528\u4E8E\u5BF9\u5177\u6709\u76F8\u540C\u4E0A\u4E0B\u6587\u7684\u5BF9\u8C61\u8FDB\u884C\u5206\u7EC4\u6E32\u67D3\u3002</p><p>\u4F7F\u7528\u793A\u4F8B\uFF1A</p><div class="language-dart ext-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">GameLayer</span> <span class="token keyword">extends</span> <span class="token class-name">DynamicLayer</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">MyGame</span> game<span class="token punctuation">;</span>

  <span class="token class-name">GameLayer</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>game<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">drawLayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    game<span class="token punctuation">.</span>playerSprite<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
      canvas<span class="token punctuation">,</span>
      position<span class="token punctuation">:</span> game<span class="token punctuation">.</span>playerPosition<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    game<span class="token punctuation">.</span>enemySprite<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
      canvas<span class="token punctuation">,</span>
      position<span class="token punctuation">:</span> game<span class="token punctuation">.</span>enemyPosition<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyGame</span> <span class="token keyword">extends</span> <span class="token class-name">Game</span> <span class="token punctuation">{</span>
  <span class="token comment">// Other methods omitted...</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token class-name">Canvas</span> canvas<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    gameLayer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// x \u548C y \u4F5C\u4E3A\u53EF\u9009\u7684\u4F4D\u7F6E\u53C2\u6570\u63D0\u4F9B</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="prerenderedlayer" tabindex="-1"><a class="header-anchor" href="#prerenderedlayer" aria-hidden="true">#</a> PreRenderedLayer</h2><p>\u9884\u6E32\u67D3\u5C42\u53EA\u6E32\u67D3\u4E00\u6B21\u5C31\u7F13\u5B58\u5230\u5185\u5B58\u4E2D\uFF0C\u7136\u540E\u518D\u590D\u5236\u5230\u6E38\u620F\u753B\u5E03\u4E0A\u3002\u5BF9\u4E8E\u5728\u6E38\u620F\u8FC7\u7A0B\u4E2D\u4E0D\u4F1A\u53D1\u751F\u53D8\u5316\u7684\u5185\u5BB9\uFF08\u5982\u80CC\u666F\uFF09\uFF0C\u5B83\u975E\u5E38\u6709\u7528\u3002</p><p>\u4F7F\u7528\u793A\u4F8B\uFF1A</p><div class="language-dart ext-dart line-numbers-mode"><pre class="language-dart"><code><span class="token keyword">class</span> <span class="token class-name">BackgroundLayer</span> <span class="token keyword">extends</span> <span class="token class-name">PreRenderedLayer</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">Sprite</span> sprite<span class="token punctuation">;</span>

  <span class="token class-name">BackgroundLayer</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sprite<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">drawLayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sprite<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
      canvas<span class="token punctuation">,</span>
      position<span class="token punctuation">:</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">MyGame</span> <span class="token keyword">extends</span> <span class="token class-name">Game</span> <span class="token punctuation">{</span>
  <span class="token comment">// Other methods omitted...</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token class-name">Canvas</span> canvas<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    backgroundLayer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  x \u548C y \u4F5C\u4E3A\u53EF\u9009\u7684\u4F4D\u7F6E\u53C2\u6570\u63D0\u4F9B</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u56FE\u5C42\u5904\u7406\u5668" tabindex="-1"><a class="header-anchor" href="#\u56FE\u5C42\u5904\u7406\u5668" aria-hidden="true">#</a> \u56FE\u5C42\u5904\u7406\u5668</h2><p>Flame \u8FD8\u63D0\u4F9B\u4E86\u4E00\u79CD\u5728\u56FE\u5C42\u4E0A\u6DFB\u52A0\u5904\u7406\u5668\u7684\u65B9\u6CD5\uFF0C\u8FD9\u662F\u5728\u6574\u4E2A\u56FE\u5C42\u4E0A\u6DFB\u52A0\u6548\u679C\u7684\u65B9\u6CD5\u3002 \u76EE\u524D\uFF0C\u5B83\u662F\u5F00\u7BB1\u5373\u7528\u7684\uFF0C\u53EA\u6709 <code>ShadowProcessor</code> \u53EF\u7528\uFF0C\u8BE5\u5904\u7406\u5668\u5728\u60A8\u7684\u56FE\u5C42\u4E0A\u5448\u73B0\u80CC\u666F\u9634\u5F71\u3002 \u4F7F\u7528\u793A\u4F8B\uFF1A</p><div class="language-dart ext-dart line-numbers-mode"><pre class="language-dart"><code><span class="token comment">// DynamicLayer \u548C PreRenderedLayer \u7684\u5DE5\u4F5C\u65B9\u5F0F\u76F8\u540C</span>
<span class="token keyword">class</span> <span class="token class-name">BackgroundLayer</span> <span class="token keyword">extends</span> <span class="token class-name">PreRenderedLayer</span> <span class="token punctuation">{</span>
  <span class="token keyword">final</span> <span class="token class-name">Sprite</span> sprite<span class="token punctuation">;</span>

  <span class="token class-name">BackgroundLayer</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sprite<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    preProcessors<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">ShadowProcessor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">drawLayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* omitted */</span> <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u901A\u8FC7\u6269\u5C55 <code>LayerProcessor</code> \u7C7B\u6765\u521B\u5EFA\u81EA\u5B9A\u4E49\u5904\u7406\u5668\u3002</p>`,16),r=n("\u4F60\u53EF\u4EE5\u5728"),k={href:"https://github.com/flame-engine/flame/tree/main/examples/lib/stories/rendering/layers.dart",target:"_blank",rel:"noopener noreferrer"},v=n("\u8FD9\u91CC"),m=n("\u67E5\u770B\u4E00\u4E2A\u56FE\u5C42\u5DE5\u4F5C\u7684\u793A\u4F8B\u3002");function b(y,h){const a=t("ExternalLinkIcon");return p(),c(o,null,[d,s("p",null,[r,s("a",k,[v,i(a)]),m])],64)}var g=e(u,[["render",b],["__file","layers.html.vue"]]);export{g as default};
